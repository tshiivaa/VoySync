-- Création de la table Vol
CREATE TABLE Vol (
    IDvol INT AUTO_INCREMENT PRIMARY KEY,
    Compagnie VARCHAR(100) NOT NULL,
    Num_vol INT NOT NULL,
    Depart VARCHAR(100) NOT NULL,
    Arrive VARCHAR(100) NOT NULL,
    DateDepart DATE NOT NULL,
    DateArrive DATE NOT NULL,
    DureeOffre DATE NOT NULL,
    Prix DECIMAL(10, 2) NOT NULL,
    Classe VARCHAR(50) NOT NULL,
    Evaluation TINYINT(1) CHECK (Evaluation >= 0 AND Evaluation <= 5)  -- Note sur 5 étoiles
);

-- Création de la table Logement
CREATE TABLE Logement (
    IDlogement INT AUTO_INCREMENT PRIMARY KEY,
    Nom VARCHAR(100) NOT NULL,
    Type VARCHAR(50) NOT NULL,
    Adresse VARCHAR(100) NOT NULL,
    Prix DECIMAL(10, 2) NOT NULL,
    Description VARCHAR(255),
    Capacite INT CHECK (Capacite >= 1 AND Capacite <= 20),
    Evaluation TINYINT(1) CHECK (Evaluation >= 0 AND Evaluation <= 5),
    Disponibilite VARCHAR(20) NOT NULL,  -- Par exemple, "disponible"
    IDvol INT,  -- Clé étrangère vers Vol
    CONSTRAINT fk_vol FOREIGN KEY (IDvol) REFERENCES Vol(IDvol)  -- Contraintes de clé étrangère
);

-- Create the Reservation table
CREATE TABLE IF NOT EXISTS `Reservation` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,  -- Primary key with auto-increment
    `vol_id` INT,  -- Foreign key referencing the Vol table
    `logement_id` INT,  -- Foreign key referencing the Logement table
    `nom` VARCHAR(100),  -- Reservation's name
    `telephone` VARCHAR(20),  -- Telephone number for the reservation
    `date_reservation` DATE,  -- Reservation date
    `destination` VARCHAR(100),  -- Destination
    `guests` INT,  -- Number of guests
    FOREIGN KEY (`vol_id`) REFERENCES `Vol`(`IDvol`),  -- Foreign key constraint
    FOREIGN KEY (`logement_id`) REFERENCES `Logement`(`IDlogement`)  -- Foreign key constraint
);

